@using ELibraryManagement.Web.Services
@inject IAuthApiService AuthService
<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Thư viện điện tử ELibrary - Nơi khởi nguồn tri thức cho người Việt Nam" />
    <meta name="keywords" content="thư viện điện tử, sách online, đọc sách, library, ebook, vietnam" />
    <title>@ViewData["Title"] - ELibrary</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />

    <!-- CSS Libraries -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom Styles -->
    @await RenderSectionAsync("Styles", required: false)
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
            <div class="container">
                <a class="navbar-brand fw-bold text-danger" asp-area="" asp-controller="Home" asp-action="Index">
                    <i class="fas fa-book-open me-2"></i>
                    <span style="color: #da251e;">ELibrary</span>
                    <small class="text-muted" style="font-size: 0.7rem;">VN</small>
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">
                                <i class="fas fa-home me-1"></i>Trang Chủ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Books">
                                <i class="fas fa-book me-1"></i>Danh Mục Sách
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#about">
                                <i class="fas fa-info-circle me-1"></i>Giới Thiệu
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#contact">
                                <i class="fas fa-phone me-1"></i>Liên Hệ
                            </a>
                        </li>
                    </ul>

                    <ul class="navbar-nav">
                        @if (AuthService.IsAuthenticated())
                        {
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdown"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-user-circle me-2"></i>
                                    <span>@AuthService.GetCurrentUserName()</span>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" asp-controller="Account" asp-action="Profile">
                                            <i class="fas fa-user me-2"></i>Thông tin cá nhân
                                        </a></li>
                                    <li><a class="dropdown-item" asp-controller="Book" asp-action="MyBooks">
                                            <i class="fas fa-book me-2"></i>Sách đã mượn
                                        </a></li>
                                    <li><a class="dropdown-item" href="#">
                                            <i class="fas fa-history me-2"></i>Lịch sử
                                        </a></li>
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li>
                                        <form asp-controller="Account" asp-action="Logout" method="post" class="d-inline">
                                            <button type="submit" class="dropdown-item border-0 bg-transparent">
                                                <i class="fas fa-sign-out-alt me-2"></i>Đăng xuất
                                            </button>
                                        </form>
                                    </li>
                                </ul>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item">
                                <a class="nav-link btn btn-outline-danger rounded-pill px-3 me-2" asp-controller="Account"
                                    asp-action="Login">
                                    <i class="fas fa-sign-in-alt me-1"></i>Đăng Nhập
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link btn btn-danger text-white rounded-pill px-3" asp-controller="Account"
                                    asp-action="Register">
                                    <i class="fas fa-user-plus me-1"></i>Đăng Ký
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Add padding to account for fixed navbar -->
    <div style="padding-top: 80px;">
        <main role="main">
            @RenderBody()
        </main>
    </div>

    <!-- Footer with Vietnamese cultural elements -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="text-danger mb-3">
                        <i class="fas fa-book-open me-2"></i>
                        ELibrary Vietnam
                    </h5>
                    <p class="text-light">
                        🇻🇳 Thư viện điện tử hàng đầu Việt Nam, nơi kết nối tri thức và văn hóa đọc.
                        Chúng tôi tự hào phục vụ cộng đồng với tinh thần "Học, học nữa, học mãi".
                    </p>
                    <div class="social-links">
                        <a href="#" class="text-light me-3" title="Facebook">
                            <i class="fab fa-facebook-f fa-lg"></i>
                        </a>
                        <a href="#" class="text-light me-3" title="Zalo">
                            <i class="fas fa-comment fa-lg"></i>
                        </a>
                        <a href="#" class="text-light me-3" title="YouTube">
                            <i class="fab fa-youtube fa-lg"></i>
                        </a>
                        <a href="#" class="text-light" title="Email">
                            <i class="fas fa-envelope fa-lg"></i>
                        </a>
                    </div>
                </div>

                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="text-warning mb-3">📚 Dịch Vụ</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-light text-decoration-none">Mượn sách online</a></li>
                        <li><a href="#" class="text-light text-decoration-none">Đọc sách điện tử</a></li>
                        <li><a href="#" class="text-light text-decoration-none">Tư vấn sách hay</a></li>
                        <li><a href="#" class="text-light text-decoration-none">Club đọc sách</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 mb-4">
                    <h6 class="text-warning mb-3">🔗 Liên Kết</h6>
                    <ul class="list-unstyled">
                        <li><a href="#about" class="text-light text-decoration-none">Về chúng tôi</a></li>
                        <li><a href="#features" class="text-light text-decoration-none">Tính năng</a></li>
                        <li><a href="#contact" class="text-light text-decoration-none">Liên hệ</a></li>
                        <li><a href="#" class="text-light text-decoration-none">Câu hỏi thường gặp</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 mb-4">
                    <h6 class="text-warning mb-3">📱 Liên Hệ Nhanh</h6>
                    <p class="text-light">
                        <i class="fas fa-phone me-2 text-danger"></i>
                        1900-ELIBRARY<br>
                        <i class="fas fa-envelope me-2 text-danger"></i>
                        hotro@elibrary.vn<br>
                        <i class="fas fa-map-marker-alt me-2 text-danger"></i>
                        TP. Hồ Chí Minh
                    </p>
                </div>
            </div>

            <hr class="my-4 text-secondary">

            <div class="row align-items-center">
                <div class="col-md-8">
                    <p class="mb-0 text-muted">
                        &copy; 2025 ELibrary Vietnam. Made with ❤️ for Vietnamese readers.
                        <br>
                        <small>Phát triển bởi đội ngũ công nghệ Việt Nam</small>
                    </p>
                </div>
                <div class="col-md-4 text-md-end">
                    <a asp-area="" asp-controller="Home" asp-action="Privacy"
                        class="text-light text-decoration-none me-3">
                        Chính sách bảo mật
                    </a>
                    <a href="#" class="text-light text-decoration-none">
                        Điều khoản sử dụng
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
